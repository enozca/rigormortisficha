<!DOCTYPE html>
<html lang="pt-BR" class="theme-noir-azul">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ficha de Investigador Interativa - Rigor Mortis</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;700&family=Merriweather:ital,wght@0,400;0,700;1,400&family=Roboto+Condensed:wght@300;400;700&family=Special+Elite&family=UnifrakturMaguntia&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="theme-switcher">
        <label for="themeSelector">Tema:</label>
        <select id="themeSelector">
            <option value="theme-noir-azul">Noir Azul (Padrão)</option>
            <option value="theme-papel-antigo">Papel Antigo</option>
            <option value="theme-high-contrast">Alto Contraste</option>
        </select>
    </div>

    <div class="controls-bar">
        <button id="saveButton" title="Salvar dados e layout"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M17 3H5C3.89 3 3 3.9 3 5V19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V7L17 3ZM19 19H5V5H16.17L19 7.83V19ZM12 12C10.9 12 10 12.9 10 14C10 15.1 10.9 16 12 16C13.1 16 14 15.1 14 14C14 12.9 13.1 12 12 12ZM15 9H5V11H15V9Z"/></svg>Salvar</button>
        <button id="loadButton" title="Carregar dados e layout"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M9 16.17L4.83 12L3.41 13.41L9 19L21 7L19.59 5.59L9 16.17Z"/></svg>Carregar</button>
        <button id="clearButton" title="Limpar dados e layout"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M6 19C6 20.1 6.9 21 8 21H16C17.1 21 18 20.1 18 19V7H6V19ZM19 4H15.5L14.5 3H9.5L8.5 4H5V6H19V4Z"/></svg>Limpar</button>
        <button id="resetLayoutButton" title="Resetar posições e tamanhos dos blocos"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.25 2.52.77-1.28-3.52-2.09V8H12z"/></svg>Resetar Layout</button>
    </div>
    <div id="notificationArea"></div>

    <div class="workspace-container" id="workspaceContainer">
        <!-- BLOCO: PERSONAGEM -->
        <div class="draggable-block resize-drag" id="blockPersonagem" data-block-id="personagem" data-default-width="850px" data-default-height="auto" style="z-index:1;">
            <div class="block-header"> <span class="block-title">PERSONAGEM</span> </div>
            <div class="block-content">
                <header class="sheet-header">
                    <span class="nome-label" id="nomeLabel">NOME DO INVESTIGADOR:</span>
                    <input type="text" id="charName" class="nome-input" placeholder="Digite o nome...">
                </header>
                <div class="character-core-info">
                    <div class="core-item"><label for="charConceito">CONCEITO</label><input type="text" id="charConceito" placeholder="Ex: Jornalista cínico..."></div>
                    <div class="core-item"><label for="charAspiracao">ASPIRAÇÃO</label><input type="text" id="charAspiracao" placeholder="Ex: Expor a corrupção..."></div>
                    <div class="core-item"><label for="charArquetipo">ARQUÉTIPO</label><select id="charArquetipo"><option value="">SELECIONE...</option><option value="colerico">COLÉRICO</option><option value="melancolico">MELANCÓLICO</option><option value="sanguineo">SANGUÍNEO</option><option value="fleumatico">FLEUMÁTICO</option></select></div>
                </div>
                <div class="core-buttons-row">
                    <button id="pontoFardo" class="small-button" title="Ponto de Fardo"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"/></svg>P FARDO (0)</button>
                    <button id="ativarArquetipo" class="small-button" title="Usar Arquétipo"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 2L2 7l10 5 10-5-10-5zm0 11.55L5.54 9.24 2 11l10 5 10-5-3.54-1.76L12 13.55zM12 17.1L5.54 14.79 2 16l10 5 10-5-3.54-1.79L12 17.1z"/></svg>USAR ARQUÉTIPO</button>
                </div>
                <div class="main-content-wrapper">
                    <div class="attributes-and-poles-section">
                        <div class="attributes-values-column">
                            <div class="section-title">ATRIBUTOS <span class="title-note">(Início 0, um +1)</span></div>
                            <div class="attribute-entry"><label for="attrImpeto" class="attr-label"><span class="suit heart">♥</span> ÍMPETO:</label><input type="number" id="attrImpeto" class="attr-value-input" value="0" min="0" max="5"></div>
                            <div class="attribute-entry"><label for="attrCinesia" class="attr-label"><span class="suit diamond">♦</span> CINESIA:</label><input type="number" id="attrCinesia" class="attr-value-input" value="0" min="0" max="5"></div>
                            <div class="attribute-entry"><label for="attrFinesse" class="attr-label"><span class="suit club">♣</span> FINESSE:</label><input type="number" id="attrFinesse" class="attr-value-input" value="0" min="0" max="5"></div>
                            <div class="attribute-entry"><label for="attrErudicao" class="attr-label"><span class="suit spade">♠</span> ERUDIÇÃO:</label><input type="number" id="attrErudicao" class="attr-value-input" value="0" min="0" max="5"></div>
                        </div>
                        <div class="attributes-details-and-poles-column">
                            <div class="section-title">POLOS VITAIS</div>
                            <div class="health-pole-wrapper">
                                <div class="health-pole-container health-pole"><div class="pole-label-box"><span class="pole-label-text">SAÚDE (INÍCIO: 3)</span></div><div class="pole-bar" id="saudePole" data-max-points="10"></div><input type="hidden" id="saudeValue" value="3"><textarea id="saudeConsequencias" class="consequencia-text" placeholder="Consequências Saúde 0..."></textarea></div>
                                <div class="health-pole-container volition-pole"><div class="pole-label-box"><span class="pole-label-text">VOLIÇÃO (INÍCIO: 3)</span></div><div class="pole-bar" id="volicaoPole" data-max-points="10"></div><input type="hidden" id="volicaoValue" value="3"><textarea id="volicaoConsequencias" class="consequencia-text" placeholder="Consequências Volição 0..."></textarea></div>
                            </div>
                            <div class="status-effects"><label class="checkbox-label"><input type="checkbox" id="isTensionado">TENSIONADO?</label><input type="text" id="vicioPersonagem" placeholder="VÍCIO..."></div>
                        </div>
                    </div>
                </div>
                <div class="section-box"><h3 id="aptidoesTitle">APTIDÕES <small>(ESCOLHA <span id="maxAptidoesCount">5</span> COM +1)</small></h3><div id="aptidoesGrid" class="aptidoes-grid"></div></div>
                <div class="section-box"><h3>ATUAÇÃO</h3><div class="atuacao-config"><div class="atuacao-item"><label for="ocupacaoInput">OCUPAÇÃO</label><input type="text" id="ocupacaoInput" placeholder="Ex: Bibliotecário..."></div><div class="atuacao-item"><label for="nivelFortunaSelect">NÍVEL DE FORTUNA</label><select id="nivelFortunaSelect"><option value="5">V - BAIXA</option><option value="4">IV - MODERADA</option><option value="3" selected>III - CONFORTÁVEL</option><option value="2">II - ALTA</option><option value="1">I - MÍTICA</option></select></div></div><div id="atuacaoDetalhes"><p>Fortuna: <span id="displayNivelFortuna">III</span> | Malandragem: <span id="displayNivelMalandragem">III</span></p><p>Itens Iniciais: <span id="itensIniciaisFortuna"></span></p></div></div>
                <div class="section-box"><h3>DETALHES</h3><div class="details-list">
                    <div class="detail-item"><label for="misterioDetail"><span class="icon-text"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M11.5 2C6.81 2 3 5.81 3 10.5S6.81 19 11.5 19h.5v3c0 .55.45 1 1 1s1-.45 1-1v-3h.5c4.69 0 8.5-3.81 8.5-8.5S17.19 2 12.5 2h-1zm0 15c-3.58 0-6.5-2.92-6.5-6.5S7.92 4 11.5 4s6.5 2.92 6.5 6.5-2.92 6.5-6.5 6.5zM11 6v5h2V6h-2zm0 6v2h2v-2h-2z"/></svg>MISTÉRIO:</span></label> <input type="text" id="misterioDetail" class="detail-input" placeholder="O enigma pessoal..."></div>
                    <div class="detail-item"><label for="segredoDetail"><span class="icon-text"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2z"/></svg>SEGREDO:</span></label> <input type="text" id="segredoDetail" class="detail-input" placeholder="O que esconde..."></div>
                    <div class="detail-item"><label for="interpretacaoPenumbraDetail"><span class="icon-text"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>INTERPRETAÇÃO (PENUMBRA):</span></label> <input type="text" id="interpretacaoPenumbraDetail" class="detail-input" placeholder="Sua visão da Penumbra..."></div>
                    <div class="detail-item"><label for="medosDetail"><span class="icon-text"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2V7zm0 8h2v2h-2v-2z"/></svg>MEDOS/FOBIAS:</span></label> <input type="text" id="medosDetail" class="detail-input" placeholder="Seus temores..."></div>
                    <div class="detail-item"><label for="focosCount">FOCOS:</label> <input type="number" id="focosCount" value="0" min="0" class="small-number-input"></div>
                </div></div>
                <div class="inventory-contacts-section">
                    <div class="section-box inventory-box"><h3>EQUIPAMENTOS</h3><div id="inventarioItens"></div><div id="vestimentasAtivas"></div></div>
                    <div class="section-box contacts-box"><h3>CONTATOS</h3><textarea id="contatosList" placeholder="Nome - Detalhe ou Telefone..."></textarea></div>
                </div>
                <div class="section-box"><h3>HABILIDADES & APRIMORAMENTO</h3><label for="pontosAprimoramento">PONTOS DE APRIMORAMENTO:</label><input type="number" id="pontosAprimoramento" value="0" min="0" class="small-number-input"><textarea id="habilidadesAdquiridas" class="full-width-textarea" placeholder="Liste Habilidades..."></textarea></div>
                <div class="logo-footer">Rigor Mortis</div>
            </div>
        </div>

        <!-- BLOCO: INVESTIGAÇÃO -->
        <div class="draggable-block resize-drag" id="blockInvestigacao" data-block-id="investigacao" data-default-width="600px" data-default-height="auto" style="z-index:2;">
            <div class="block-header"><span class="block-title">INVESTIGAÇÃO</span></div>
            <div class="block-content">
                <header class="sheet-header investigation-header">FICHA DE INVESTIGAÇÃO</header>
                <div class="investigation-section"><label for="casoPerguntasText">CASO & PERGUNTAS INICIAIS <small>(MÁX 5)</small></label><textarea id="casoPerguntasText" class="large-textarea" placeholder="1. ..."></textarea></div>
                <div class="investigation-section"><label for="palacioMentalText">PALÁCIO MENTAL <small>(PISTAS, CONEXÕES, TEORIAS)</small></label><textarea id="palacioMentalText" class="large-textarea" placeholder="Pista: ... Conexão: ..."></textarea></div>
                <div class="investigation-section"><label for="anotacoesGeraisText">ANOTAÇÕES GERAIS</label><textarea id="anotacoesGeraisText" class="large-textarea notes-textarea" placeholder="..."></textarea></div>
            </div>
        </div>
         <!-- Adicione mais blocos aqui se desejar, ex: para Equipamentos e Contatos separados -->
    </div>

    <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
    <script src="script.js" defer></script> <!-- Adicionado defer -->
</body>
</html>